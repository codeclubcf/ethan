<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <title>tlk.io / sb-7</title>
  <meta name="description" content="This is a simple web chat. It's open to anyone and chat channels are owner-free." />
  <meta name="author" content="See tlk.io/humans.txt" />
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <link rel="icon" type="image/png" href="/images/favicon.png" />

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">

  <meta name="apple-mobile-web-app-title" content="tlk.io">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />

  <!-- iPhone 5 support: https://gist.github.com/burin/3840737 -->
  <meta name="viewport" id="vp" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" />
  <meta name="viewport" id="vp" content="initial-scale=1.0,user-scalable=no,maximum-scale=1" media="(device-height: 568px)" />
  <link href="/images/startup-640x1096.png" rel="apple-touch-startup-image" media="(device-height: 568px)">
  <link href="/images/startup-640x960.png" rel="apple-touch-startup-image" sizes="640x960" media="(device-height: 480px)">

  <meta content="authenticity_token" name="csrf-param" />
<meta content="c8uKd9fOTkZmIUqtNvGMC5RClFhXu3mqcU+3WbZBrlU=" name="csrf-token" />

  <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,bold|Terminal+Dosis:500" media="screen" rel="stylesheet" type="text/css" />
    <link href="/assets/application-901c2f28f724a8aa37bbcfa39f2bf8b4.css" media="screen" rel="stylesheet" type="text/css" />

  

  <script src="/assets/modernizr-1.7.min-0bb6c237de6805583e8e6ee05eb1dc1e.js" type="text/javascript"></script>

  <style id="ban-list"></style>

  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11370103-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
  


<header class="header">
  <div class="header-bar">
      <a href="http://tlk.io" class="header-icon">tlk.io</a>
    <span id="channel" class="header-channel">sb-7</span>
  </div>
</header>

<div id="chat" class="chat">
  <section id="live">
    <button id="load-button" class="button button-load">Load more</button>
  </section>
</div>

<footer class="footer"></footer>

<aside class="aside hasZeroParticipants">
  <menu class="menu">
    <button id="user-btn" class="menu-item button button-user button-troll">
      <svg class="menu-item-icon" viewBox="0 0 36 36"><use xlink:href="#icon-troll"></use></svg>
    </button>
    <button id="notifications" class="menu-item button button--notifications" title="Notifications">
      <svg class="menu-item-icon menu-item-icon--off" viewBox="0 0 36 36"><use xlink:href="#icon-banner-off"></use></svg>
      <svg class="menu-item-icon menu-item-icon--on" viewBox="0 0 36 36"><use xlink:href="#icon-banner-on"></use></svg>
    </button>
    <button id="mute_button" class="menu-item button button--mute" title="Sound">
      <svg class="menu-item-icon menu-item-icon--off" viewBox="0 0 36 36"><use xlink:href="#icon-audio-off"></use></svg>
      <svg class="menu-item-icon menu-item-icon--on" viewBox="0 0 36 36"><use xlink:href="#icon-audio-on"></use></svg>
    </button>
  </menu>

  <div id="user-settings" class="settings tooltip tooltip--user">
    <ul id="theme-picker" class="theme-picker">
        <li data-theme="theme--day" class="theme-picker-item"></li>
        <li data-theme="theme--pop" class="theme-picker-item"></li>
        <li data-theme="theme--minimal" class="theme-picker-item"></li>
        <li data-theme="theme--night" class="theme-picker-item"></li>
    </ul>
    <button id="sign-out" class="button button--logout">Sign out</button>
    <button id="remove-messages" class="button button--danger button--remove">Remove all my messages</button>
  </div>

  <div class="participants">
    <ul id="online-participants" class="participant-list"></ul>
  </div>

  <div class="counter">
    <span id="user-counter" class="user-counter">0</span> online
    <button id="share_button" class="button counter-button" title="Invite">+</button>
  </div>

</aside>

<menu class="panel-menu">
  <button id="panel-button" class="panel-button">
      <div class="panel-button-slider"></div>
  </button>
  <div id="panel-counter" class="panel-counter">5</div>
</menu>

<button id="scroll_down" class="button-down">
  <svg class="button-down-icon" viewBox="0 0 36 36"><use xlink:href="#icon-arrow-down"></use></svg>
</button>


<!-- Icons --------------------------------------------- -->

<svg style="display:none;">
  <path id="icon-troll" transform="translate(10, 9)"
    d="M5.84818444,9.23596328 C5.92733701,10.0946459 5.85949905,11.1958603 5.16334661,11.8372093 C4.01593625,13 1.14741036,14.0465116 1.14741036,14.0465116 C1.14741036,14.0465116 0,14.627907 0,16.0232558 L0,18 L15.949004,18 C15.949004,18 16.063745,17.1860465 15.949004,16.0232558 C15.7195219,14.9767442 15.7195219,14.627907 15.1458167,14.0465116 C14.4573705,13.3488372 12.1625498,13.1162791 10.9003984,11.8372093 C10.2374346,11.0981738 10.1873584,9.93212999 10.2632532,9.07924304 C11.3044085,8.16686717 12,6.66022262 12,4.94382022 C12,1.23595506 10.1369863,0 7.94520548,0 C5.75342466,0 4,1.23595506 4,4.94382022 C4,6.76252133 4.73503796,8.34571607 5.84818444,9.23596328 Z">

  <path id="icon-banner-off" transform="translate(10, 10)" fill-rule="evenodd"
    d="M1.99406028,3 C0.892771196,3 0,3.88743329 0,4.99961498 L0,11.000385 C0,12.1047419 0.894513756,13 1.99406028,13 L14.0059397,13 C15.1072288,13 16,12.1125667 16,11.000385 L16,4.99961498 C16,3.89525812 15.1054862,3 14.0059397,3 L1.99406028,3 Z M3.00247329,5 C2.44882258,5 2,5.45097518 2,5.99077797 L2,10.009222 C2,10.5564136 2.45576096,11 3.00247329,11 L12.9975267,11 C13.5511774,11 14,10.5490248 14,10.009222 L14,5.99077797 C14,5.44358641 13.544239,5 12.9975267,5 L3.00247329,5 Z">

  <path id="icon-banner-on" transform="translate(10, 14)" fill-rule="evenodd"
    d="M1.99406028,0 C0.892771196,0 0,0.88743329 0,1.99961498 L0,8.00038502 C0,9.10474188 0.894513756,10 1.99406028,10 L14.0059397,10 C15.1072288,10 16,9.11256671 16,8.00038502 L16,1.99961498 C16,0.895258123 15.1054862,0 14.0059397,0 L1.99406028,0 Z M4,7 C5.10456955,7 6,6.10456955 6,5 C6,3.89543045 5.10456955,3 4,3 C2.89543045,3 2,3.89543045 2,5 C2,6.10456955 2.89543045,7 4,7 Z M8,2 L8,4 L14,4 L14,2 L8,2 Z M8,6 L8,8 L14,8 L14,6 L8,6 Z">

  <path id="icon-audio-off" transform="translate(14, 12)"
    d="M0,4 L3,4 L7,0 L7,12 L3,8 L0,8 L0,4">

  <path id="icon-audio-on" transform="translate(11, 12)"
    d="M0,4 L3,4 L7,0 L7,12 L3,8 L0,8 L0,4 M12,1 L12,11 L13,11 L13,1 L12,1 M10,3 L10,9 L11,9 L11,3 L10,3">

  <path id="icon-plus" transform="translate(11, 11)"
    d="M6,8 L1,8 L1,6 L6,6 L6,1 L8,1 L8,6 L13,6 L13,8 L8,8 L8,13 L6,13 L6,8 Z">

  <path id="icon-arrow-down" transform="translate(8, 7)"
    d="M7,12 L7,0 L13,0 L13,12 L20,12 L10,22 L0,12 L7,12 Z">

  <path id="icon-twitter" transform="translate(3, 6)"
    d="M25,5.89399206 C24.2642,6.21530132 23.4733,6.43236226 22.6434,6.53001507 C23.4905,6.03013505 24.1412,5.23857631 24.4475,4.29532101 C23.6546,4.75828591 22.7765,5.09436121 21.8418,5.27549143 C21.0934,4.49042975 20.027,4 18.8468,4 C16.5808,4 14.7435,5.80844741 14.7435,8.03910542 C14.7435,8.35568954 14.7798,8.66400468 14.8497,8.959621 C11.4395,8.79118959 8.4161,7.18306826 6.3923,4.73928692 C6.0391,5.33583536 5.8367,6.02964285 5.8367,6.76991417 C5.8367,8.17131079 6.5611,9.40762297 7.6621,10.131947 C6.9895,10.1109792 6.3568,9.92925831 5.8036,9.62675116 C5.8032,9.64358446 5.8032,9.6605162 5.8032,9.67754637 C5.8032,11.6345403 7.2176,13.2670748 9.0947,13.6381949 C8.7504,13.7305319 8.3879,13.7798505 8.0137,13.7798505 C7.7493,13.7798505 7.4923,13.7544529 7.2417,13.7073984 C7.7639,15.3120743 9.2792,16.4799705 11.0748,16.5124558 C9.6705,17.5957917 7.9013,18.2416587 5.9788,18.2416587 C5.6476,18.2416587 5.321,18.2224629 5,18.185154 C6.8159,19.3312948 8.9727,20 11.2899,20 C18.8372,20 22.9645,13.8451164 22.9645,8.5073861 C22.9645,8.33226074 22.9605,8.15811979 22.9526,7.98476636 C23.7543,7.41538746 24.4499,6.70405759 25,5.89399206 L25,5.89399206 Z">
</svg>


<!-- Audio --------------------------------------------- -->

<audio id="audio_new" preload="none">
  <source src="audio/new.mp3?150712" />
  <source src="audio/new.ogg?150712" />
  <source src="audio/new.wav?150712" />
</audio>


<!-- Scripts --------------------------------------------- -->



  <!-- Handlebar.js templates -->
  <script id="participant-template" type="text/x-handlebars-template">
  // TODO: Still needed? I changed it, but doesn't seem to have an affect. I think it's now in online_users.js
  <li id="author_{{user_id}}" class="participant-list-item">
    {{nickname}}
  </li>
</script>

<script id="message-container-template" type="text/x-handlebars-template">
  // TODO: Still needed?
  <dl class="{{klass}}" data-user-id="{{user.token}}" data-user-nickname="{{user.nickname}}">
    <dt data-timestamp="{{timestamp}}">
      {{#if user}}
        {{#with user}}
          <a href="http://twitter.com/{{nickname}}" target="_blank" class="name name-twitter">{{nickname}}</a>
          <div class="reply" data-name="{{nickname}}">
            <div class="avatar" style="background-image: url({{avatar}});"></div>
            <button class="reply-btn">@</button>
          </div>
        {{/with}}
      {{else}}
        <span class="name">{{nickname}}</span>
        <div class="reply" data-name="{{nickname}}">
          <div class="avatar avatar-troll">{{initials}}</div>
          <button class="reply-btn">@</button>
        </div>
      {{/if}}
    </dt>
  </dl>
</script>

<script id="message-author-template" type="text/x-handlebars-template">
  <dt class="post-meta" data-timestamp="{{timestamp}}">
    {{#if user}}
      {{#with user}}
        <a class="post-name post-name--twitter" href="http://twitter.com/{{nickname}}" target="_blank">{{nickname}}</a>
        <div class="post-reply js-reply" data-name="{{nickname}}">
          <div class="post-avatar" style="background-image: url({{avatar}});"></div>
          <button class="post-reply-button">@</button>
        </div>
      {{/with}}
    {{else}}
      <span class="post-name">{{nickname}}</span>
      <div class="post-reply js-reply" data-name="{{nickname}}">
        <div class="post-avatar post-avatar--troll">{{initials}}</div>
        <button class="post-reply-button">@</button>
      </div>
    {{/if}}
  </dt>
</script>

<script id="message-template" type="text/x-handlebars-template">
  {{{body}}}
  <div class="post-time">
    <div class="post-time-dot"></div>
    <span class="post-time-tag js-post-time-tag"></span>
  </div>
</script>

<script id="share-template" type="text/x-handlebars-template">
  <div id="invite" class="popup-box">
    <div class="popup-header">
      <h2 class="popup-header-title">Invite to this chat!</h2>
      <button id="popup-close" class="button popup-button--close">✕</button>
    </div>
    <div class="popup-content">
      <p>Invite on <a class="button popup-button" href="https://twitter.com/share?text=Join%20me!%20I'm%20currently%20chatting%20on%3A&url=http%3A%2F%2Ftlk.io%2Fsb-7" target="_blank">Twitter</a></p>
      <p>Or share the link below anywhere you like.<br>
        <span class="popup-link">http://tlk.io/sb-7</span> <a href="#" class="url_button button popup-button">Copy</a></p>
    </div>
    <div class="popup-footer">Remember, this is a public chat. Anybody with the link can read.</div>
  </div>
</script>

<script id="join-chatroom-template" type="text/x-handlebars-template">
  <div class="footer-wrapper">
    <div class="join">
      <span class="join-hl">Wanna join?</span>
      <form action="/something/participant" id="participant-form" class="join-form" method="post">
        <input id="participant_nickname" class="input-text join-input--troll" name="participant[nickname]" placeholder="Name" size="30" spellcheck="false" type="text">
      </form>
      <span class="join-or">or</span>
      <button id="twitter-button" class="button join-button--twitter">
        <svg class="twitter-button-icon" viewBox="0 0 36 36"><use xlink:href="#icon-twitter"></use></svg>
        Twitter</button>
      <p class="join-hint">By using Twitter you'll get your avatar. We won't tweet anything.</p>
    </div>
  </div>
</script>

<script id="message-form-template" type="text/x-handlebars-template">
  <div class="footer-wrapper">
    <form action="/" id="new_message" class="message" method="post">
      <textarea id="message_body" class="message-input" name="message[body]" autocomplete="off" autofocus tabindex="1" cols="40" placeholder="be nice..." rows="1"></textarea>
      {{#if twitter}}
        <div id="footer-avatar" class="message-avatar" style="background-image: url({{avatar}});"></div>
      {{/if}}
      <button id="submit-button" class="button message-button--submit">Send</button>
    </form>
  </div>
</script>

<script id="user-navigation-template" type="text/x-handlebars-template">
  // TODO: Is this still needed? I think it used to be in the header and is now part of the side panel.
  {{#if twitter}}
    <li id="user-btn" class="avatar" style="background-image: url({{avatar}});"></li>
    <li class="edit hero">
      <button id="remove-hero-btn" class="button button-twitter">Sign out</button>
    </li>
  {{else}}
    <li id="user-btn" class="avatar"></li>
    <li class="edit troll">
      <form action="/" id="participant-form" method="post">
        <input id="participant_nickname" class="input-text" name="participant[nickname]" placeholder="Name" size="30" spellcheck="false" type="text" value="{{nickname}}" />
      </form>
      <span class="or">or</span>
      <button class="button button-twitter">Twitter</button>
    </li>
  {{/if}}
</script>

<script id="online-user-template" type="text/x-handlebars-template">
  <span class="participant-list-avatar" style="background-image: url({{avatar}});"></span>
  <span class="participant-list-name">{{nickname}}</span>
</script>

  <!-- JS -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
  <script>!window.jQuery && document.write("<script src=\"/assets/jquery-1.10.2-b1b96a7891d21cdffecce65542e44636.js\" type=\"text/javascript\"><\/script>")</script>

    <script src="/assets/application-09d744cdd9a9bff345f5db03daa027bf.js" type="text/javascript"></script>

  <script type="text/javascript">
    var WEB_SOCKET_SWF_LOCATION = '/WebSocketMain.swf';
    var socket;

    Talkio.Paths = {
      sign_out: '/sign_out',
      participant: '/api/participant'
    };

    Talkio.Variables.message_view_limit = 50;
    Talkio.Variables.chat_permalink = 'sb-7';
    Talkio.Variables.timestamps = { };
      Talkio.Variables.timestamps[31557600.0] = 'Long long time ago';
      Talkio.Variables.timestamps[7776000] = 'Couple months ago';
      Talkio.Variables.timestamps[5184000] = '2 months ago';
      Talkio.Variables.timestamps[2592000] = '1 month ago';
      Talkio.Variables.timestamps[1814400] = 'Couple weeks ago';
      Talkio.Variables.timestamps[1209600] = '2 weeks ago';
      Talkio.Variables.timestamps[604800] = '1 week ago';
      Talkio.Variables.timestamps[259200] = 'Couple days ago';
      Talkio.Variables.timestamps[172800] = '2 days ago';
      Talkio.Variables.timestamps[86400] = 'Yesterday';
      Talkio.Variables.timestamps[43200] = 'Half a day ago';
      Talkio.Variables.timestamps[10800] = 'Couple hours ago';
      Talkio.Variables.timestamps[7200] = '2 hours ago';
      Talkio.Variables.timestamps[3600] = 'An hour ago';

    $(function() {
      Talkio.Variables.users = new Talkio.Collections.Users();
        Talkio.Variables.users.add({"token":"d1ec8f","nickname":"g","twitter":false,"avatar":null}, { silent: true });
        Talkio.Variables.users.setCurrentUser('d1ec8f');

      Talkio.Variables.chat_room = new Talkio.Views.ChatRoom({ collection: Talkio.Variables.users });
      Talkio.Variables.socket_notifications = new SocketNotifications();

      // Fetching chat messages from the server
      Talkio.Variables.messages.fetch({ reset: true });

        // Socket.io client events
        socket = io.connect('//ws.tlk.io');

        socket.on('connect', function() {
          socket.emit('subscribe', { chat_id: 'chat_112416', user_info: Talkio.Variables.users.current_user ? Talkio.Variables.users.current_user.toJSON() : null });
        });

        socket.on('message', function(message) {
          Talkio.Variables.socket_notifications.process($.parseJSON(message));
        });

        socket.on('disconnect', function() {
          Talkio.Variables.chat_room.is_offline = true;
          Talkio.Variables.users.trigger('set_offline');
        });
    });
  </script>

</body>
</html>
